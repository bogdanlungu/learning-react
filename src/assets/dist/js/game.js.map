{"version":3,"sources":["node_modules/browser-pack/_prelude.js","game.js","src/assets/js/game.jsx"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length","1","module","possibleCombinationSum","arr","indexOf","pop","listSize","combinationsCount","combinationSum","j","StarsFrame","React","createClass","render","stars","this","props","numberOfStars","push","createElement","key","className","id","ButtonFrame","disabled","button","correct","onClick","acceptAnswer","selectedNumbers","checkAnswer","redraw","redraws","AnswerFrame","map","unselectNumber","bind","NumbersFrame","numbers","selectNumber","usedNumbers","DoneFrame","doneStatus","Game","getInitialState","randomNumber","Math","floor","random","clickedNumber","state","setState","concat","indexOfNumber","splice","sumOfSelectedNumbers","reduce","p","console","log","updateDoneStatus","possibleSolution","possibleNumbers","bottomFrame","ReactDOM","document","getElementById"],"mappings":"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","file":"game.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){\n\"use strict\";\n\n/* Possible combinations of two arrays\n----------------------------------- */\nvar possibleCombinationSum = function possibleCombinationSum(arr, n) {\n  if (arr.indexOf(n) >= 0) {\n    return true;\n  }\n  if (arr[0] > n) {\n    return false;\n  }\n  if (arr[arr.length - 1] > n) {\n    arr.pop();\n    return possibleCombinationSum(arr, n);\n  }\n  var listSize = arr.length,\n      combinationsCount = 1 << listSize;\n  for (var i = 1; i < combinationsCount; i++) {\n    var combinationSum = 0;\n    for (var j = 0; j < listSize; j++) {\n      if (i & 1 << j) {\n        combinationSum += arr[j];\n      }\n    }\n    if (n === combinationSum) {\n      return true;\n    }\n  }\n  return false;\n};\n\n/* Start component\n----------------------------------- */\nvar StarsFrame = React.createClass({\n\n  render: function render() {\n    var stars = [];\n    for (var i = 0; i < this.props.numberOfStars; i++) {\n      stars.push(React.createElement(\"span\", { key: i, className: \"glyphicon glyphicon-star\" }));\n    }\n    return React.createElement(\n      \"div\",\n      { id: \"stars-frame\" },\n      React.createElement(\n        \"div\",\n        { className: \"well\" },\n        stars\n      )\n    );\n  }\n\n});\n\n/* Button component\n----------------------------------- */\nvar ButtonFrame = React.createClass({\n\n  render: function render() {\n    var disabled,\n        button,\n        correct = this.props.correct;\n\n    switch (correct) {\n      case true:\n        button = React.createElement(\n          \"button\",\n          { className: \"btn btn-success\",\n            onClick: this.props.acceptAnswer },\n          React.createElement(\"span\", { className: \"glyphicon glyphicon-ok\" })\n        );\n        break;\n      case false:\n        button = React.createElement(\n          \"button\",\n          { className: \"btn btn-danger\" },\n          React.createElement(\"span\", { className: \"glyphicon glyphicon-remove\" })\n        );\n        break;\n      default:\n        disabled = this.props.selectedNumbers.length === 0;\n        button = React.createElement(\n          \"button\",\n          { className: \"btn btn-primary\", disabled: disabled,\n            onClick: this.props.checkAnswer },\n          \"=\"\n        );\n    }\n\n    return React.createElement(\n      \"div\",\n      { id: \"button-frame\" },\n      button,\n      React.createElement(\n        \"button\",\n        { className: \"btn btn-warning btn-xs refresh\", onClick: this.props.redraw,\n          disabled: this.props.redraws === 0 },\n        React.createElement(\"span\", { className: \"glyphicon glyphicon-refresh\" }),\n        \"\\xA0\",\n        this.props.redraws\n      )\n    );\n  }\n\n});\n\n/* Answer component\n----------------------------------- */\nvar AnswerFrame = React.createClass({\n\n  render: function render() {\n    var props = this.props;\n    var selectedNumbers = props.selectedNumbers.map(function (i) {\n      return React.createElement(\n        \"span\",\n        { key: i, onClick: props.unselectNumber.bind(null, i) },\n        i\n      );\n    });\n\n    return React.createElement(\n      \"div\",\n      { id: \"answer-frame\" },\n      React.createElement(\n        \"div\",\n        { className: \"well\" },\n        selectedNumbers\n      )\n    );\n  }\n\n});\n\n/* Numbers frame\n----------------------------------- */\nvar NumbersFrame = React.createClass({\n\n  render: function render() {\n\n    var numbers = [],\n        className,\n        selectNumber = this.props.selectNumber,\n        selectedNumbers = this.props.selectedNumbers,\n        usedNumbers = this.props.usedNumbers;\n    for (var i = 0; i <= 9; i++) {\n      className = \"number selected-\" + (selectedNumbers.indexOf(i) >= 0); // see if the number it is in the array\n      className += \" used-\" + (usedNumbers.indexOf(i) >= 0);\n      numbers.push(React.createElement(\n        \"div\",\n        { key: i, className: className, onClick: selectNumber.bind(null, i) },\n        i\n      ));\n    }\n    return React.createElement(\n      \"div\",\n      { id: \"numbers-frame\" },\n      React.createElement(\n        \"div\",\n        { className: \"well\" },\n        numbers\n      )\n    );\n  }\n\n});\n\n/* Game done component\n----------------------------------- */\nvar DoneFrame = React.createClass({\n  render: function render() {\n    return React.createElement(\n      \"div\",\n      { className: \"well text-center\" },\n      React.createElement(\n        \"h2\",\n        null,\n        this.props.doneStatus\n      )\n    );\n  }\n});\n\n/* Main component\n----------------------------------- */\nvar Game = React.createClass({\n\n  getInitialState: function getInitialState() {\n    return {\n      numberOfStars: this.randomNumber(),\n      selectedNumbers: [],\n      usedNumbers: [],\n      redraws: 5,\n      correct: null,\n      doneStatus: null\n    };\n  },\n\n  randomNumber: function randomNumber() {\n    return Math.floor(Math.random() * 9) + 1;\n  },\n\n  selectNumber: function selectNumber(clickedNumber) {\n    if (this.state.selectedNumbers.indexOf(clickedNumber) < 0) {\n      this.setState({\n        selectedNumbers: this.state.selectedNumbers.concat(clickedNumber),\n        correct: null\n      });\n    }\n  },\n\n  unselectNumber: function unselectNumber(clickedNumber) {\n    var selectedNumbers = this.state.selectedNumbers,\n        indexOfNumber = selectedNumbers.indexOf(clickedNumber);\n\n    selectedNumbers.splice(indexOfNumber, 1);\n\n    this.setState({ selectedNumbers: selectedNumbers, correct: null });\n  },\n\n  sumOfSelectedNumbers: function sumOfSelectedNumbers() {\n    return this.state.selectedNumbers.reduce(function (p, n) {\n      return p + n;\n    }, 0);\n  },\n\n  checkAnswer: function checkAnswer() {\n    var correct = this.state.numberOfStars == this.sumOfSelectedNumbers();\n    this.setState({ correct: correct });\n  },\n\n  acceptAnswer: function acceptAnswer() {\n    var usedNumbers = this.state.usedNumbers.concat(this.state.selectedNumbers);\n    this.setState({\n      selectedNumbers: [],\n      usedNumbers: usedNumbers,\n      correct: null,\n      numberOfStars: this.randomNumber()\n    }, function () {\n      console.log(\"CallBack\");\n      this.updateDoneStatus();\n    });\n  },\n\n  redraw: function redraw() {\n    if (this.state.redraws > 0) {\n      this.setState({\n        numberOfStars: this.randomNumber(),\n        correct: null,\n        selectedNumbers: [],\n        redraws: this.state.redraws - 1\n      }, function () {\n        console.log(\"CallBack\");\n        this.updateDoneStatus();\n      });\n    }\n  },\n\n  possibleSolution: function possibleSolution() {\n    var numberOfStars = this.state.numberOfStars,\n        possibleNumbers = [],\n        usedNumbers = this.state.usedNumbers;\n\n    for (var i = 1; i <= 9; i++) {\n      if (usedNumbers.indexOf(i) < 0) {\n        possibleNumbers.push(i);\n      }\n    }\n\n    return possibleCombinationSum(possibleNumbers, numberOfStars);\n  },\n\n  updateDoneStatus: function updateDoneStatus() {\n    console.log(this.state.doneStatus);\n    if (this.state.usedNumbers.length === 9) {\n      this.setState({ doneStatus: 'Done. Nice!' });\n      return;\n    }\n\n    if (this.state.redraws === 0 && !this.possibleSolution()) {\n      this.setState({ doneStatus: 'Game Over!' });\n      return;\n    }\n  },\n\n  render: function render() {\n    var numberOfStars = this.state.numberOfStars,\n        selectedNumbers = this.state.selectedNumbers,\n        usedNumbers = this.state.usedNumbers,\n        correct = this.state.correct,\n        checkAnswer = this.checkAnswer,\n        redraws = this.state.redraws,\n        doneStatus = this.state.doneStatus,\n        bottomFrame;\n\n    if (doneStatus) {\n      bottomFrame = React.createElement(DoneFrame, { doneStatus: doneStatus });\n    } else {\n      bottomFrame = React.createElement(NumbersFrame, { selectedNumbers: selectedNumbers,\n        usedNumbers: usedNumbers,\n        selectNumber: this.selectNumber });\n    }\n\n    return React.createElement(\n      \"div\",\n      { id: \"game\" },\n      React.createElement(\n        \"h2\",\n        null,\n        \"Play game!\"\n      ),\n      React.createElement(\"hr\", null),\n      React.createElement(\n        \"div\",\n        { className: \"clearfix\" },\n        React.createElement(StarsFrame, { numberOfStars: numberOfStars }),\n        React.createElement(ButtonFrame, { selectedNumbers: selectedNumbers,\n          correct: correct,\n          checkAnswer: checkAnswer,\n          acceptAnswer: this.acceptAnswer,\n          redraw: this.redraw,\n          redraws: redraws }),\n        React.createElement(AnswerFrame, { selectedNumbers: selectedNumbers,\n          unselectNumber: this.unselectNumber })\n      ),\n      bottomFrame\n    );\n  }\n\n});\n\n/* Render\n----------------------------------- */\nReactDOM.render(React.createElement(Game, null), document.getElementById('container'));\n\n},{}]},{},[1])\n\n","/* Possible combinations of two arrays\n----------------------------------- */\nvar possibleCombinationSum = function (arr, n) {\n  if (arr.indexOf(n) >= 0) { return true; }\n  if (arr[0] > n) { return false; }\n  if (arr[arr.length - 1] > n) {\n    arr.pop();\n    return possibleCombinationSum(arr, n);\n  }\n  var listSize = arr.length, combinationsCount = (1 << listSize);\n  for (var i = 1; i < combinationsCount; i++) {\n    var combinationSum = 0;\n    for (var j = 0; j < listSize; j++) {\n      if (i & (1 << j)) { combinationSum += arr[j]; }\n    }\n    if (n === combinationSum) { return true; }\n  }\n  return false;\n};\n\n\n/* Start component\n----------------------------------- */\nvar StarsFrame = React.createClass({\n\n  render: function () {\n    var stars = [];\n    for (var i = 0; i < this.props.numberOfStars; i++) {\n      stars.push(\n        <span key={i} className=\"glyphicon glyphicon-star\"></span>\n      );\n    }\n    return (\n      <div id=\"stars-frame\">\n        <div className=\"well\">\n          {stars}\n        </div>\n      </div>\n    );\n  }\n\n});\n\n\n/* Button component\n----------------------------------- */\nvar ButtonFrame = React.createClass({\n\n  render: function () {\n    var disabled, button, correct = this.props.correct;\n\n    switch (correct) {\n      case true:\n        button = (\n          <button className=\"btn btn-success\"\n            onClick={this.props.acceptAnswer}>\n            <span className=\"glyphicon glyphicon-ok\"></span>\n          </button>\n        );\n        break;\n      case false:\n        button = (\n          <button className=\"btn btn-danger\">\n            <span className=\"glyphicon glyphicon-remove\"></span>\n          </button>\n        );\n        break;\n      default:\n        disabled = (this.props.selectedNumbers.length === 0);\n        button = (\n          <button className=\"btn btn-primary\" disabled={disabled}\n            onClick={this.props.checkAnswer}>=</button>\n        );\n    }\n\n    return (\n      <div id=\"button-frame\">\n        {button}\n        <button className=\"btn btn-warning btn-xs refresh\" onClick={this.props.redraw}\n          disabled={this.props.redraws === 0}>\n          <span className=\"glyphicon glyphicon-refresh\"></span>\n          &nbsp;\n          {this.props.redraws}\n        </button>\n      </div>\n    );\n  }\n\n});\n\n\n/* Answer component\n----------------------------------- */\nvar AnswerFrame = React.createClass({\n\n  render: function () {\n    var props = this.props;\n    var selectedNumbers = props.selectedNumbers.map(function (i) {\n      return (\n        <span key={i} onClick={props.unselectNumber.bind(null, i)}>\n          {i}\n        </span>\n      );\n    });\n\n    return (\n      <div id=\"answer-frame\">\n        <div className=\"well\">\n          {selectedNumbers}\n        </div>\n      </div>\n    );\n  }\n\n});\n\n\n/* Numbers frame\n----------------------------------- */\nvar NumbersFrame = React.createClass({\n\n  render: function () {\n\n    var numbers = [], className,\n      selectNumber = this.props.selectNumber,\n      selectedNumbers = this.props.selectedNumbers,\n      usedNumbers = this.props.usedNumbers;\n    for (var i = 0; i <= 9; i++) {\n      className = \"number selected-\" + (selectedNumbers.indexOf(i) >= 0); // see if the number it is in the array\n      className += \" used-\" + (usedNumbers.indexOf(i) >= 0);\n      numbers.push(\n        <div key={i} className={className} onClick={selectNumber.bind(null, i)}>\n          {i}\n        </div>\n      );\n    }\n    return (\n      <div id=\"numbers-frame\">\n        <div className=\"well\">\n          {numbers}\n        </div>\n      </div>\n    );\n  }\n\n});\n\n\n/* Game done component\n----------------------------------- */\nvar DoneFrame = React.createClass({\n  render: function () {\n    return (\n      <div className=\"well text-center\">\n        <h2>{this.props.doneStatus}</h2>\n      </div>\n    );\n  }\n});\n\n\n/* Main component\n----------------------------------- */\nvar Game = React.createClass({\n\n  getInitialState: function () {\n    return {\n      numberOfStars: this.randomNumber(),\n      selectedNumbers: [],\n      usedNumbers: [],\n      redraws: 5,\n      correct: null,\n      doneStatus: null\n    };\n  },\n\n  randomNumber: function () {\n    return Math.floor(Math.random() * 9) + 1;\n  },\n\n  selectNumber: function (clickedNumber) {\n    if (this.state.selectedNumbers.indexOf(clickedNumber) < 0) {\n      this.setState(\n        {\n          selectedNumbers: this.state.selectedNumbers.concat(clickedNumber),\n          correct: null\n        }\n      );\n    }\n  },\n\n  unselectNumber: function (clickedNumber) {\n    var selectedNumbers = this.state.selectedNumbers,\n      indexOfNumber = selectedNumbers.indexOf(clickedNumber);\n\n    selectedNumbers.splice(indexOfNumber, 1);\n\n    this.setState({ selectedNumbers: selectedNumbers, correct: null });\n\n  },\n\n  sumOfSelectedNumbers: function () {\n    return this.state.selectedNumbers.reduce(function (p, n) {\n      return p + n;\n    }, 0);\n  },\n\n  checkAnswer: function () {\n    var correct = (this.state.numberOfStars == this.sumOfSelectedNumbers());\n    this.setState({ correct: correct });\n  },\n\n  acceptAnswer: function () {\n    var usedNumbers = this.state.usedNumbers.concat(this.state.selectedNumbers);\n    this.setState({\n      selectedNumbers: [],\n      usedNumbers: usedNumbers,\n      correct: null,\n      numberOfStars: this.randomNumber()\n    }, function () {\n      console.log(\"CallBack\");\n      this.updateDoneStatus();\n    });\n  },\n\n  redraw: function () {\n    if (this.state.redraws > 0) {\n      this.setState({\n        numberOfStars: this.randomNumber(),\n        correct: null,\n        selectedNumbers: [],\n        redraws: this.state.redraws - 1\n      }, function () {\n        console.log(\"CallBack\");\n        this.updateDoneStatus();\n      });\n    }\n  },\n\n  possibleSolution: function () {\n    var numberOfStars = this.state.numberOfStars,\n      possibleNumbers = [],\n      usedNumbers = this.state.usedNumbers;\n\n    for (var i = 1; i <= 9; i++) {\n      if (usedNumbers.indexOf(i) < 0) {\n        possibleNumbers.push(i);\n      }\n    }\n\n    return possibleCombinationSum(possibleNumbers, numberOfStars);\n  },\n\n  updateDoneStatus: function () {\n    console.log(this.state.doneStatus);\n    if (this.state.usedNumbers.length === 9) {\n      this.setState({ doneStatus: 'Done. Nice!' });\n      return;\n    }\n\n    if (this.state.redraws === 0 && !this.possibleSolution()) {\n      this.setState({ doneStatus: 'Game Over!' });\n      return;\n    }\n  },\n\n  render: function () {\n    var numberOfStars = this.state.numberOfStars,\n      selectedNumbers = this.state.selectedNumbers,\n      usedNumbers = this.state.usedNumbers,\n      correct = this.state.correct,\n      checkAnswer = this.checkAnswer,\n      redraws = this.state.redraws,\n      doneStatus = this.state.doneStatus,\n      bottomFrame;\n\n    if (doneStatus) {\n      bottomFrame = <DoneFrame doneStatus={doneStatus} />;\n    } else {\n      bottomFrame = <NumbersFrame selectedNumbers={selectedNumbers}\n        usedNumbers={usedNumbers}\n        selectNumber={this.selectNumber} />;\n    }\n\n    return (\n      <div id=\"game\">\n        <h2>Play game!</h2>\n        <hr />\n        <div className=\"clearfix\">\n          <StarsFrame numberOfStars={numberOfStars} />\n          <ButtonFrame selectedNumbers={selectedNumbers}\n            correct={correct}\n            checkAnswer={checkAnswer}\n            acceptAnswer={this.acceptAnswer}\n            redraw={this.redraw}\n            redraws={redraws} />\n          <AnswerFrame selectedNumbers={selectedNumbers}\n            unselectNumber={this.unselectNumber} />\n        </div>\n\n        {bottomFrame}\n      </div>\n    );\n  }\n\n});\n\n\n/* Render\n----------------------------------- */\nReactDOM.render(\n  <Game />,\n  document.getElementById('container')\n);\n"]}